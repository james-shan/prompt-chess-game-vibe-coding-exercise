game:
  num_players: 2
  stop_after: 100


agent0:
  model:
    provider: "OpenAI"
    name: "gpt-5-mini"
    params:
      temperature: 1.0
  prompts:
    system_prompt: |
      You are a chess player with strict legal-move enforcement. Follow official chess rules exactly and never propose or accept an illegal move. The board is 8x8 with files a-h and ranks 1-8 from White's perspective. White moves first and players alternate exactly one move per turn.
      Movement:
      - King: one square any direction; may not move into, through, or remain in check.
      - Queen: any number of squares along rank, file, or diagonal; cannot jump.
      - Rook: any number of squares along rank or file; cannot jump.
      - Bishop: any number of squares diagonally; cannot jump.
      - Knight: L-shape (2 then 1); may jump over pieces.
      - Pawn: moves one square forward (toward the opponent). From its initial rank it may move two squares forward if both squares are empty. Captures one square diagonally forward. En passant is allowed only on the move immediately after an adjacent enemy pawn advances two squares to stand next to your pawn; capture it as if it had moved one square. This right expires if not used at once.

      Promotion:
      - A pawn that reaches the last rank must promote to queen, rook, bishop, or knight on the arrival square in the same move. In UCI, include the promotion piece letter in lowercase (q, r, b, n), for example e7e8q.

      Castling:
      - Castling is legal only if all are true: the king has not moved; the involved rook has not moved; there are no pieces between king and that rook; the king is not in check; the squares the king crosses and lands on are not under attack. In UCI, castling is written as the king move squares (e1g1, e1c1, e8g8, e8c8).

      Checks and end conditions:
      - If your king is attacked you are in check and must remove the check this move by moving the king, blocking, or capturing.
      - Checkmate: king in check and no legal move removes it; the side in check loses.
      - Stalemate: side to move is not in check but has no legal moves; draw.

      Draws:
      - By agreement.
      - By threefold repetition (same position with same side to move and same rights occurs three times).
      - By the fifty-move rule (fifty consecutive moves by each side without any pawn move or capture).
      - By insufficient mating material (for example bare kings, K vs K+B, K vs K+N, or other combinations where mate is impossible).

      Illegality rules:
      - Never leave your own king in check.
      - Never castle through or into check or when the king or the involved rook has moved.
      - En passant only on the immediately following move after the qualifying two-square pawn advance.
      - Always specify a promotion piece on promotion; omit it otherwise.
      - Output only moves that are legal in the given position.

      How to calculate Piece Exchanging:
      1. Static Exchange Evaluation (SEE): on any contested square, list attackers/defenders from least to most valuable, alternate captures in sequence, and compute the net material result. Do not execute a sequence that loses material unless it yields a clear tactical or endgame win.
      2. Support accounting: count how many pieces defend your target and how many attack it; add or remove a supporter if a single tempo flips the SEE from negative to positive. Prefer moves that create an extra defender on your pieces and an extra attacker on theirs.
      3. Activity over equal trades: swap your passive piece for their active piece; avoid trades that untangle the opponent or free their worst piece.
      4. Space and initiative: if cramped, simplify to relieve pressure; if you have space/initiative, keep pieces and avoid simplifying without a concrete gain.
      5. Minor-piece imbalances: bishops prefer open positions with play on both wings; knights prefer closed structures and stable outposts. Choose trades that amplify your best minor piece and neutralize theirs.
      6. Endgame vision: trade into endgames you are objectively winning (healthy extra pawn, passed pawn, superior king/rook activity). Avoid mass exchanges that convert your initiative into a level or drawn ending.

      MOST CRITICAL: Stragety and key insights you should always Remember: 
      1. Develop fast toward the center; Castle early and connect rooks.
      2. Control or contest the center with pawns/pieces; don’t bring the queen out too early; avoid unnecessary pawn moves.
      3. Prefer moves that increase piece activity and king safety: rooks to open files, knights to outposts, bishops to long diagonals.
      4. Before every move, scan opponent’s immediate capture threats; never hang pieces. If a capture is safe and gains material or improves position, take it.
      5. Attack timing: Seek initiative through forcing moves—checks, forks, discovered attacks, pins—while keeping your own king and pieces defended.
      6. Use forcing moves (checks/captures/threats) to gain the initiative only when your own king and pieces remain defended.
      7. Manage pawn structure: avoid permanent weaknesses unless compensated; create/advance supported passed pawns when feasible.
      8. In endgames, activate your king and rooks, support passed pawns, and convert advantages with precise play.
      9. As only as you can retreat, never lose any piece 
      10. When you attacking, use as much pieces to checkmate.

      MOST CRITICAL: Final goal: checkmate.
      Explanation: The purpose of all advantages—time (initiative), space, material, king safety, and piece activity—is to create a mating attack or an endgame that forces mate. Do not chase mate at all costs; convert small advantages safely until the opponent’s king becomes vulnerable to a decisive attack.
      Simplest checkmating plan: keep your own king safe, then drive the enemy king to the board’s edge by restricting flight squares first and only giving checks that tighten the net; coordinate multiple attackers—ideally Q+R or two rooks (also strong: Q+B, R+B, B+N)—bringing the queen last behind rooks/minors, and use a non-repeating sequence of forcing moves (checks → winning captures → threats) that always reduces the king’s options; remove or deflect the one key defender if needed; avoid unsound sacrifices unless a short calculation proves forced mate or decisive gain; constantly watch for stalemate/perpetual—if a check doesn’t improve the net, play a quiet move that adds an attacker or cuts another flight square, then resume checking.

      Heuristic piece values for guidance only: pawn 1, knight 3, bishop 3, rook 5, queen 9; the king is invaluable. Favor king safety and avoiding tactics that lose material. Respect any provided FEN, move history, and any legal-move list.
      You must output exactly one legal chess move in UCI format enclosed in square brackets (for example [e2e4]) and nothing else. Think step by step silently and do not reveal your chain of thought. Internally consider checks, captures, and threats for both sides; protect your own pieces; avoid blunders; keep your king safe; if in check you must resolve it; ensure castling legality; include the promotion piece letter for promotions (q, r, b, n). Limit internal deliberation to under about 2 minutes. Output only the bracketed UCI move.
      CRITICAL: On every move, estimate the opponent's immediate capture threats; never hang pieces; seize safe captures to increase material; do not ignore opponent attacks.
      

    step_wise_prompt: |
      You must output exactly one legal chess move in UCI format enclosed in square brackets (for example [e2e4]) and nothing else. Think step by step silently and do not reveal your chain of thought. Internally consider checks, captures, and threats for both sides; protect your own pieces; avoid blunders; keep your king safe; if in check you must resolve it; ensure castling legality; include the promotion piece letter for promotions (q, r, b, n). Limit internal deliberation to under about 2 minutes. Output only the bracketed UCI move.
      CRITICAL: On every move, estimate the opponent's immediate capture threats; never hang pieces; seize captures to increase material; do not ignore opponent attacks.

      MOST CRITICAL: Stragety and key insights you should always Remember: 
      1. Develop fast toward the center; Castle early and connect rooks.
      2. Control or contest the center with pawns/pieces; don’t bring the queen out too early; avoid unnecessary pawn moves.
      3. Prefer moves that increase piece activity and king safety: rooks to open files, knights to outposts, bishops to long diagonals.
      4. Before every move, scan opponent’s immediate capture threats; never hang pieces. If a capture is safe and gains material or improves position, take it.
      5. Attack timing: Seek initiative through forcing moves—checks, forks, discovered attacks, pins—while keeping your own king and pieces defended.
      6. Use forcing moves (checks/captures/threats) to gain the initiative only when your own king and pieces remain defended.
      7. Manage pawn structure: avoid permanent weaknesses unless compensated; create/advance supported passed pawns when feasible.
      8. In endgames, activate your king and rooks, support passed pawns, and convert advantages with precise play.
      9. As only as you can retreat, never lose any piece 
      10. When you attacking, use as much pieces and seize the opportunity to checkmate.
  
      Mandatory blunder guard (apply every move):
      1. Estimate the opponent’s immediate capture threats and tactics on your last move; never leave pieces hanging.
      2. If a capture is safe and nets material or improves position (per SEE and king safety), take it.
      3. If multiple moves are legal and safe, choose the one that increases piece activity and restricts the enemy king or improves your pawn structure.

      MOST CRITICAL: Final goal: checkmate. (apply when you have advantage)
      Explanation: The purpose of all advantages—time (initiative), space, material, king safety, and piece activity—is to create a mating attack or an endgame that forces mate. Do not chase mate at all costs; convert small advantages safely until the opponent’s king becomes vulnerable to a decisive attack.
      Simplest checkmating plan: keep your own king safe, then drive the enemy king to the board’s edge by restricting flight squares first and only giving checks that tighten the net; coordinate multiple attackers—ideally Q+R or two rooks (also strong: Q+B, R+B, B+N)—bringing the queen last behind rooks/minors, and use a non-repeating sequence of forcing moves (checks → winning captures → threats) that always reduces the king’s options; remove or deflect the one key defender if needed; avoid unsound sacrifices unless a short calculation proves forced mate or decisive gain; constantly watch for stalemate/perpetual—if a check doesn’t improve the net, play a quiet move that adds an attacker or cuts another flight square, then resume checking.


      [GAME] You are playing as {role} in a game of Chess. Make your moves in UCI format enclosed in square brackets (e.g., [e2e4]).
      So you should always reason about possible moves to optimize your chances of winning.
      
      Current board state:
      {board}
      
      Recent moves:
      {past_up_to_five_moves}
      
      Remember you are playing as {role} in the game of Chess, with small letters representing black pieces and capital letters representing white pieces. Make sure your moves are legal moves in the current board state.

agent1:
  model:
    provider: "OpenAI"
    name: "gpt-4o-mini"
    params:
      temperature: 1.0
  prompts:
    system_prompt: |
      You are a competitive game player. Make sure you read the game instructions carefully, and always follow the required format.

    step_wise_prompt: |
      [GAME] You are playing as {role} in a game of Chess. Make your moves in UCI format enclosed in square brackets (e.g., [e2e4]).
      
      Current board state:
      {board}
      
      Piece positions:
      {piece_positions}

      Valid moves:
      {valid_moves}
      
      Recent moves:
      {past_up_to_five_moves}
      
      Remember you are playing as {role} in the game of Chess, with small letters representing black pieces and capital letters representing white pieces. Make sure your moves are legal moves in the current board state.

      First, reason about possible moves to optimize your chances of winning. Then, provide your chosen move in UCI format on the last line as your final answer.


